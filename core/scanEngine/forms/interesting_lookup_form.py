from django import forms
from django_ace import AceWidget

from core.scanEngine.models import *
from core.validators import validate_short_name


class InterestingLookupForm(forms.ModelForm):
    class Meta:
        model = InterestingLookupModel
        fields = "__all__"

    keywords = forms.CharField(
        required=False,
        widget=forms.TextInput(
            attrs={
                "class": "form-control form-control-lg",
                "id": "keywords",
                "placeholder": "Interesting Keywords",
            }
        ),
    )

    custom_type = forms.BooleanField(
        required=False, widget=forms.HiddenInput(attrs={"value": "true"})
    )

    title_lookup = forms.BooleanField(
        required=False,
        widget=forms.CheckboxInput(
            attrs={"class": "form-check-input", "id": "title_lookup"}
        ),
    )

    url_lookup = forms.BooleanField(
        required=False,
        widget=forms.CheckboxInput(
            attrs={"class": "form-check-input", "id": "url_lookup"}
        ),
    )

    condition_200_http_lookup = forms.BooleanField(
        required=False,
        widget=forms.CheckboxInput(
            attrs={"class": "form-check-input", "id": "condition_200_http_lookup"}
        ),
    )

    def set_value(self, key):
        print(key.url_lookup)
        self.initial["keywords"] = key.keywords
        self.initial["title_lookup"] = key.title_lookup
        self.initial["url_lookup"] = key.url_lookup
        self.initial["condition_200_http_lookup"] = key.condition_200_http_lookup

    def initial_checkbox(self):
        self.initial["title_lookup"] = True
        self.initial["url_lookup"] = True
        self.initial["condition_200_http_lookup"] = False
